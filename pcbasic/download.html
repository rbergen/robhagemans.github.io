<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="icons/icon.png" />
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="style/pure-min.css" />
    <link rel="stylesheet" href="style/grids-responsive-min.css" />
    <link rel="stylesheet" href="style/front.css" />
    <link rel="stylesheet" href="style/menu.css" />
    <!--<![endif]-->

    <title>PC-BASIC Downloads</title>

    <script>
        // without JS, generic links are left which is also OK
        var suffix_win32 = '-win32.exe';
        var plat_win32 = "Windows";
        var suffix_osx = '-osx.dmg';
        var plat_osx = "OS X";
        var suffix_src = '.tgz';
        var plat_src = "Linux and Unix";

        function setStableRelease(tag_name) {
            var url_base = "https://github.com/robhagemans/pcbasic/releases/download/" + tag_name + '/';
            var bin_base = url_base + "pcbasic-" + tag_name;
            document.getElementById("win32-link").setAttribute('href', bin_base + suffix_win32);
            document.getElementById("win32-link").innerHTML = "PC-BASIC " + tag_name + " for " + plat_win32;
            // osx
            document.getElementById("osx-link").setAttribute('href', bin_base + suffix_osx);
            document.getElementById("osx-link").innerHTML = ("PC-BASIC " + tag_name + " for " + plat_osx);
            // src
            document.getElementById("src-link").setAttribute('href', bin_base + suffix_src);
            document.getElementById("src-link").innerHTML = ("PC-BASIC " + tag_name + " for " + plat_src);
            // readme
            document.getElementById("readme-link").setAttribute('href', url_base + 'README.md');
            document.getElementById("generaldownload").innerHTML = 'These and older releases can also be found on the <a href="https://github.com/robhagemans/pcbasic/releases/latest">PC-BASIC release page on GitHub</a>';
        };

        // get latest release from GitHub
        var json_url = "https://api.github.com/repos/robhagemans/pcbasic/releases";
        var request = new XMLHttpRequest();
        request.open('GET', json_url, true);

        request.onload = function() {
            if (request.status >= 200 && request.status < 400) {
                var result = JSON.parse(request.responseText);
                for (var i=0; i < result.length; ++i) {
                    console.log(result[i]);
                    // results are returned latestfirst, fo first v1 tag is latest stable
                    if (result[i].tag_name.startsWith('v1')) {
                        setStableRelease(result[i].tag_name);
                        break;
                    }
                }
            }
        };

        request.send();
    </script>
</head>

<body>

    <nav class="home-menu pure-menu pure-menu-responsive pure-menu-fixed">
        <a class="pure-menu-heading" href="index.html">PC-BASIC</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item pure-menu-selected"><a href="download.html" class="pure-menu-link">Download</a></li>
            <li class="pure-menu-item"><a href="https://github.com/robhagemans/pcbasic/" class="pure-menu-link">Source</a></li>
            <li class="pure-menu-item"><a href="doc/" class="pure-menu-link">Documentation</a></li>
            <li class="pure-menu-item"><a href="https://sourceforge.net/p/pcbasic/discussion/" class="pure-menu-link">Discuss</a></li>
        </ul>
    </nav>

    <article class="pure-g">
        <h1 class="hidden">Downloads</h1>
        <section class="pure-u-1">
            <h2>Stable releases</h2>
            <table>
                <tr>
                    <th></th>
                    <th>Download</th>
                    <th>Requirements</th>
                </tr>
                <tr>
                    <td><img src="icons/windows.png" class="icon" alt="Windows"></td>
                    <td><a id="win32-link" href="https://github.com/robhagemans/pcbasic/releases/latest">
                    PC-BASIC release page on GitHub</a></td>
                    <td>Windows XP and above</td>
                </tr
                ><tr>
                    <td><img src="icons/apple.png" class="icon" alt="OS X"></td>
                    <td><a id="osx-link" href="https://github.com/robhagemans/pcbasic/releases/latest">
                    PC-BASIC release page on GitHub</a></td>
                    <td>OS X 10.6 and above</td>
                </tr>
                <tr>
                    <td><img src="icons/python.png" class="icon" alt="Python"/></td>
                    <td><a id="src-link" href="https://github.com/robhagemans/pcbasic/releases/latest">
                    PC-BASIC release page on GitHub</a></td>
                    <td>Linux, FreeBSD or any other system that runs Python 2.7</td>
                </tr>
            </table>
            <p id="generaldownload" class="centre"></p>
        </section>
        <section class="pure-u-1">
            <h2>Latest development release</h2>
            <p class="centre">
                For the latest development (pre-)releases, please visit the
                <a href="https://github.com/robhagemans/pcbasic/releases/">PC-BASIC release page on GitHub</a>.
            </p>
        </section>
    </article>

    <hr />

    <article class="pure-g">
        <h1 class="hidden">Notes</h1>
        <section class="pure-u-1 pure-u-lg-1-2">
            <h3>Get going</h3>
            <p>
                PC-BASIC will run on any system that supports <a href="https://www.python.org/">Python</a> and, for a graphical interface, <a href="http://pygame.org">PyGame</a>. The packaged releases for Windows and OS X run out of the box. So does the source release on Debian, Ubuntu,
                Mint and Fedora; on all architectures. On other Linux and Unix systems, the source distribution will install automatically but you will need to manually install dependencies.
            </p>
            <p>
                See the <a href="https://github.com/robhagemans/pcbasic/blob/master/README.md" id="readme-link">PC-BASIC README</a> for a list of packages and installation instructions.
            </p>
        </section>
        <section class="pure-u-1 pure-u-lg-1-2">
            <h3>Bugs and features</h3>
            <p>
                Should you find a bug or wish to request a feature, please post a message on <a href="https://sourceforge.net/p/pcbasic/discussion/">the discussion page</a>.
            </p>
        </section>
    </article>

    <hr class="footspace" />

        <footer>
            <small>PC-BASIC is a <a href="http://www.gnu.org/licenses/gpl-3.0.en.html">free software</a> project by Rob Hagemans.
            Website style uses <a href="http://purecss.io">Pure CSS Toolkit</a> by Yahoo and <a href="https://necolas.github.io/normalize.css/">normalize.css</a> by Nicolas Gallagher and Jonathan Neal.
            VGA bitmap font based on <a href="http://www.freedos.org/software/?prog=cpidos">CPIDOS</a> by Henrique Peron.</small>
        </footer>

</body>
</html>
